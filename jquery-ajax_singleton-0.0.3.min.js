
(function($){$.oajax=$.ajax;$.xhr_reference_index=[];$.ajax=function(origSettings){var s=jQuery.extend(true,{singleton:false,delay:0,blocking:false,index_key:origSettings.url},origSettings);xhr_ref=$.xhr_reference_index[s.index_key];if(s.singleton){if(undefined!=xhr_ref){if(!s.blocking){if(undefined!=xhr_ref.xhr)xhr_ref.xhr.abort();clearTimeout(xhr_ref.timer);$.clear_xhr_refs(s.index_key);}else{return xhr_ref.xhr;}}}
if(s.delay>0){$.xhr_reference_index[s.index_key]={xhr:undefined,timer:undefined,callback:function(){$.xhr_reference_index[s.index_key].xhr=$.oajax(s);}};$.xhr_reference_index[s.index_key].timer=setTimeout("jQuery.xhr_reference_index['"+s.index_key+"'].callback();",parseInt(s.delay));return $.xhr_reference_index[s.index_key].timer;}else{$.xhr_reference_index[s.index_key]={xhr:$.oajax(s),timer:undefined,callback:function(){}};return $.xhr_reference_index[s.index_key].xhr;}};$.clear_xhr_refs=function(key){$.xhr_reference_index[key]=undefined;}})(jQuery);jQuery(document).ajaxComplete(function(e,xhr,s){jQuery.clear_xhr_refs(s.index_key);});